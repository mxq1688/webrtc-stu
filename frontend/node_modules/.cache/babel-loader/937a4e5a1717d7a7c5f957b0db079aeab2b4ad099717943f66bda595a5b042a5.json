{"ast":null,"code":"var _jsxFileName = \"/Users/meng/stu/webrtc-stu/frontend/src/components/MeetingRoom.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useSearchParams, useNavigate } from 'react-router-dom';\nimport { v4 as uuidv4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WEBSOCKET_URL = 'ws://localhost:8080/ws';\nfunction MeetingRoom() {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const username = searchParams.get('username');\n  const userId = useRef(uuidv4());\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState(new Map());\n  const [users, setUsers] = useState([]);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState('');\n  const localVideoRef = useRef();\n  const websocketRef = useRef();\n  const peerConnectionsRef = useRef(new Map());\n  const remoteVideoRefs = useRef(new Map());\n  const servers = {\n    iceServers: [{\n      urls: 'stun:stun.l.google.com:19302'\n    }, {\n      urls: 'stun:stun1.l.google.com:19302'\n    }]\n  };\n  useEffect(() => {\n    if (!username) {\n      navigate('/');\n      return;\n    }\n    initializeMedia();\n    connectWebSocket();\n    return () => {\n      cleanup();\n    };\n  }, [roomId, username]);\n  const initializeMedia = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      setLocalStream(stream);\n      if (localVideoRef.current) {\n        localVideoRef.current.srcObject = stream;\n      }\n    } catch (err) {\n      console.error('获取媒体设备失败:', err);\n      setError('无法访问摄像头或麦克风，请检查设备权限');\n    }\n  };\n  const connectWebSocket = () => {\n    const wsUrl = `${WEBSOCKET_URL}?userId=${userId.current}&roomId=${roomId}&username=${encodeURIComponent(username)}`;\n    websocketRef.current = new WebSocket(wsUrl);\n    websocketRef.current.onopen = () => {\n      console.log('WebSocket连接已建立');\n      setIsConnected(true);\n    };\n    websocketRef.current.onmessage = async event => {\n      const message = JSON.parse(event.data);\n      await handleWebSocketMessage(message);\n    };\n    websocketRef.current.onclose = () => {\n      console.log('WebSocket连接已关闭');\n      setIsConnected(false);\n    };\n    websocketRef.current.onerror = error => {\n      console.error('WebSocket错误:', error);\n      setError('服务器连接失败');\n    };\n  };\n  const handleWebSocketMessage = async message => {\n    console.log('收到消息:', message);\n    switch (message.type) {\n      case 'user-list':\n        setUsers(message.data || []);\n        break;\n      case 'user-joined':\n        if (message.userId !== userId.current) {\n          setUsers(prev => [...prev, {\n            id: message.userId,\n            username: message.username\n          }]);\n          await createPeerConnection(message.userId);\n          await createOffer(message.userId);\n        }\n        break;\n      case 'user-left':\n        setUsers(prev => prev.filter(user => user.id !== message.userId));\n        closePeerConnection(message.userId);\n        break;\n      case 'offer':\n        await handleOffer(message);\n        break;\n      case 'answer':\n        await handleAnswer(message);\n        break;\n      case 'ice-candidate':\n        await handleIceCandidate(message);\n        break;\n    }\n  };\n  const createPeerConnection = async remoteUserId => {\n    const peerConnection = new RTCPeerConnection(servers);\n    peerConnectionsRef.current.set(remoteUserId, peerConnection);\n\n    // 添加本地流\n    if (localStream) {\n      localStream.getTracks().forEach(track => {\n        peerConnection.addTrack(track, localStream);\n      });\n    }\n\n    // 处理远程流\n    peerConnection.ontrack = event => {\n      console.log('收到远程流:', event);\n      const [remoteStream] = event.streams;\n      setRemoteStreams(prev => new Map(prev.set(remoteUserId, remoteStream)));\n    };\n\n    // 处理ICE候选者\n    peerConnection.onicecandidate = event => {\n      if (event.candidate) {\n        sendMessage({\n          type: 'ice-candidate',\n          data: event.candidate,\n          targetUserId: remoteUserId\n        });\n      }\n    };\n    return peerConnection;\n  };\n  const createOffer = async remoteUserId => {\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (!peerConnection) return;\n    try {\n      const offer = await peerConnection.createOffer();\n      await peerConnection.setLocalDescription(offer);\n      sendMessage({\n        type: 'offer',\n        data: offer,\n        targetUserId: remoteUserId\n      });\n    } catch (error) {\n      console.error('创建offer失败:', error);\n    }\n  };\n  const handleOffer = async message => {\n    const {\n      userId: remoteUserId,\n      data: offer\n    } = message;\n    let peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (!peerConnection) {\n      peerConnection = await createPeerConnection(remoteUserId);\n    }\n    try {\n      await peerConnection.setRemoteDescription(offer);\n      const answer = await peerConnection.createAnswer();\n      await peerConnection.setLocalDescription(answer);\n      sendMessage({\n        type: 'answer',\n        data: answer,\n        targetUserId: remoteUserId\n      });\n    } catch (error) {\n      console.error('处理offer失败:', error);\n    }\n  };\n  const handleAnswer = async message => {\n    const {\n      userId: remoteUserId,\n      data: answer\n    } = message;\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (peerConnection) {\n      try {\n        await peerConnection.setRemoteDescription(answer);\n      } catch (error) {\n        console.error('处理answer失败:', error);\n      }\n    }\n  };\n  const handleIceCandidate = async message => {\n    const {\n      userId: remoteUserId,\n      data: candidate\n    } = message;\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (peerConnection) {\n      try {\n        await peerConnection.addIceCandidate(candidate);\n      } catch (error) {\n        console.error('添加ICE候选者失败:', error);\n      }\n    }\n  };\n  const sendMessage = message => {\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify(message));\n    }\n  };\n  const closePeerConnection = remoteUserId => {\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (peerConnection) {\n      peerConnection.close();\n      peerConnectionsRef.current.delete(remoteUserId);\n    }\n    setRemoteStreams(prev => {\n      const newMap = new Map(prev);\n      newMap.delete(remoteUserId);\n      return newMap;\n    });\n  };\n  const toggleAudio = () => {\n    if (localStream) {\n      const audioTrack = localStream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioEnabled(audioTrack.enabled);\n      }\n    }\n  };\n  const toggleVideo = () => {\n    if (localStream) {\n      const videoTrack = localStream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(videoTrack.enabled);\n      }\n    }\n  };\n  const leaveRoom = () => {\n    cleanup();\n    navigate('/');\n  };\n  const cleanup = () => {\n    if (localStream) {\n      localStream.getTracks().forEach(track => track.stop());\n    }\n    peerConnectionsRef.current.forEach(pc => pc.close());\n    peerConnectionsRef.current.clear();\n    if (websocketRef.current) {\n      websocketRef.current.close();\n    }\n  };\n  const copyRoomId = () => {\n    navigator.clipboard.writeText(roomId);\n    alert('房间ID已复制到剪贴板');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"\\u4F1A\\u8BAE\\u5BA4: \", roomId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u7528\\u6237: \", username, \" | \\u5728\\u7EBF\\u4EBA\\u6570: \", users.length + 1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        onClick: copyRoomId,\n        style: {\n          marginTop: '10px'\n        },\n        children: \"\\u590D\\u5236\\u623F\\u95F4ID\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"video-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: localVideoRef,\n          className: \"video\",\n          autoPlay: true,\n          muted: true,\n          playsInline: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-overlay\",\n          children: [username, \" (\\u6211)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), Array.from(remoteStreams.entries()).map(([userId, stream]) => {\n        const user = users.find(u => u.id === userId);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            className: \"video\",\n            autoPlay: true,\n            playsInline: true,\n            ref: el => {\n              if (el && stream) {\n                el.srcObject = stream;\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-overlay\",\n            children: (user === null || user === void 0 ? void 0 : user.username) || 'Unknown User'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this)]\n        }, userId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn ${isAudioEnabled ? 'btn-success' : 'btn-danger'}`,\n        onClick: toggleAudio,\n        children: isAudioEnabled ? '🎤 麦克风开启' : '🎤 麦克风关闭'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn ${isVideoEnabled ? 'btn-success' : 'btn-danger'}`,\n        onClick: toggleVideo,\n        children: isVideoEnabled ? '📹 摄像头开启' : '📹 摄像头关闭'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: leaveRoom,\n        children: \"\\u79BB\\u5F00\\u4F1A\\u8BAE\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"\\u53C2\\u4F1A\\u4EBA\\u5458 (\", users.length + 1, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-indicator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), username, \" (\\u6211)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this), users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-indicator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this), user.username]\n      }, user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        marginTop: '20px',\n        color: isConnected ? '#51cf66' : '#ff6b6b'\n      },\n      children: isConnected ? '🟢 已连接到服务器' : '🔴 服务器连接断开'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this);\n}\n_s(MeetingRoom, \"4K4WXkFWvG8sosqeuHR4DP0hQdY=\", false, function () {\n  return [useParams, useSearchParams, useNavigate];\n});\n_c = MeetingRoom;\nexport default MeetingRoom;\nvar _c;\n$RefreshReg$(_c, \"MeetingRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useSearchParams","useNavigate","v4","uuidv4","jsxDEV","_jsxDEV","WEBSOCKET_URL","MeetingRoom","_s","roomId","searchParams","navigate","username","get","userId","localStream","setLocalStream","remoteStreams","setRemoteStreams","Map","users","setUsers","isAudioEnabled","setIsAudioEnabled","isVideoEnabled","setIsVideoEnabled","isConnected","setIsConnected","error","setError","localVideoRef","websocketRef","peerConnectionsRef","remoteVideoRefs","servers","iceServers","urls","initializeMedia","connectWebSocket","cleanup","stream","navigator","mediaDevices","getUserMedia","video","audio","current","srcObject","err","console","wsUrl","encodeURIComponent","WebSocket","onopen","log","onmessage","event","message","JSON","parse","data","handleWebSocketMessage","onclose","onerror","type","prev","id","createPeerConnection","createOffer","filter","user","closePeerConnection","handleOffer","handleAnswer","handleIceCandidate","remoteUserId","peerConnection","RTCPeerConnection","set","getTracks","forEach","track","addTrack","ontrack","remoteStream","streams","onicecandidate","candidate","sendMessage","targetUserId","offer","setLocalDescription","setRemoteDescription","answer","createAnswer","addIceCandidate","readyState","OPEN","send","stringify","close","delete","newMap","toggleAudio","audioTrack","getAudioTracks","enabled","toggleVideo","videoTrack","getVideoTracks","leaveRoom","stop","pc","clear","copyRoomId","clipboard","writeText","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","onClick","style","marginTop","ref","autoPlay","muted","playsInline","Array","from","entries","map","find","u","el","textAlign","color","_c","$RefreshReg$"],"sources":["/Users/meng/stu/webrtc-stu/frontend/src/components/MeetingRoom.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useSearchParams, useNavigate } from 'react-router-dom';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst WEBSOCKET_URL = 'ws://localhost:8080/ws';\n\nfunction MeetingRoom() {\n  const { roomId } = useParams();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  \n  const username = searchParams.get('username');\n  const userId = useRef(uuidv4());\n  \n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState(new Map());\n  const [users, setUsers] = useState([]);\n  const [isAudioEnabled, setIsAudioEnabled] = useState(true);\n  const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState('');\n\n  const localVideoRef = useRef();\n  const websocketRef = useRef();\n  const peerConnectionsRef = useRef(new Map());\n  const remoteVideoRefs = useRef(new Map());\n\n  const servers = {\n    iceServers: [\n      { urls: 'stun:stun.l.google.com:19302' },\n      { urls: 'stun:stun1.l.google.com:19302' }\n    ]\n  };\n\n  useEffect(() => {\n    if (!username) {\n      navigate('/');\n      return;\n    }\n    \n    initializeMedia();\n    connectWebSocket();\n    \n    return () => {\n      cleanup();\n    };\n  }, [roomId, username]);\n\n  const initializeMedia = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true\n      });\n      setLocalStream(stream);\n      if (localVideoRef.current) {\n        localVideoRef.current.srcObject = stream;\n      }\n    } catch (err) {\n      console.error('获取媒体设备失败:', err);\n      setError('无法访问摄像头或麦克风，请检查设备权限');\n    }\n  };\n\n  const connectWebSocket = () => {\n    const wsUrl = `${WEBSOCKET_URL}?userId=${userId.current}&roomId=${roomId}&username=${encodeURIComponent(username)}`;\n    websocketRef.current = new WebSocket(wsUrl);\n\n    websocketRef.current.onopen = () => {\n      console.log('WebSocket连接已建立');\n      setIsConnected(true);\n    };\n\n    websocketRef.current.onmessage = async (event) => {\n      const message = JSON.parse(event.data);\n      await handleWebSocketMessage(message);\n    };\n\n    websocketRef.current.onclose = () => {\n      console.log('WebSocket连接已关闭');\n      setIsConnected(false);\n    };\n\n    websocketRef.current.onerror = (error) => {\n      console.error('WebSocket错误:', error);\n      setError('服务器连接失败');\n    };\n  };\n\n  const handleWebSocketMessage = async (message) => {\n    console.log('收到消息:', message);\n\n    switch (message.type) {\n      case 'user-list':\n        setUsers(message.data || []);\n        break;\n        \n      case 'user-joined':\n        if (message.userId !== userId.current) {\n          setUsers(prev => [...prev, { id: message.userId, username: message.username }]);\n          await createPeerConnection(message.userId);\n          await createOffer(message.userId);\n        }\n        break;\n        \n      case 'user-left':\n        setUsers(prev => prev.filter(user => user.id !== message.userId));\n        closePeerConnection(message.userId);\n        break;\n        \n      case 'offer':\n        await handleOffer(message);\n        break;\n        \n      case 'answer':\n        await handleAnswer(message);\n        break;\n        \n      case 'ice-candidate':\n        await handleIceCandidate(message);\n        break;\n    }\n  };\n\n  const createPeerConnection = async (remoteUserId) => {\n    const peerConnection = new RTCPeerConnection(servers);\n    peerConnectionsRef.current.set(remoteUserId, peerConnection);\n\n    // 添加本地流\n    if (localStream) {\n      localStream.getTracks().forEach(track => {\n        peerConnection.addTrack(track, localStream);\n      });\n    }\n\n    // 处理远程流\n    peerConnection.ontrack = (event) => {\n      console.log('收到远程流:', event);\n      const [remoteStream] = event.streams;\n      setRemoteStreams(prev => new Map(prev.set(remoteUserId, remoteStream)));\n    };\n\n    // 处理ICE候选者\n    peerConnection.onicecandidate = (event) => {\n      if (event.candidate) {\n        sendMessage({\n          type: 'ice-candidate',\n          data: event.candidate,\n          targetUserId: remoteUserId\n        });\n      }\n    };\n\n    return peerConnection;\n  };\n\n  const createOffer = async (remoteUserId) => {\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (!peerConnection) return;\n\n    try {\n      const offer = await peerConnection.createOffer();\n      await peerConnection.setLocalDescription(offer);\n      \n      sendMessage({\n        type: 'offer',\n        data: offer,\n        targetUserId: remoteUserId\n      });\n    } catch (error) {\n      console.error('创建offer失败:', error);\n    }\n  };\n\n  const handleOffer = async (message) => {\n    const { userId: remoteUserId, data: offer } = message;\n    \n    let peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (!peerConnection) {\n      peerConnection = await createPeerConnection(remoteUserId);\n    }\n\n    try {\n      await peerConnection.setRemoteDescription(offer);\n      const answer = await peerConnection.createAnswer();\n      await peerConnection.setLocalDescription(answer);\n      \n      sendMessage({\n        type: 'answer',\n        data: answer,\n        targetUserId: remoteUserId\n      });\n    } catch (error) {\n      console.error('处理offer失败:', error);\n    }\n  };\n\n  const handleAnswer = async (message) => {\n    const { userId: remoteUserId, data: answer } = message;\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    \n    if (peerConnection) {\n      try {\n        await peerConnection.setRemoteDescription(answer);\n      } catch (error) {\n        console.error('处理answer失败:', error);\n      }\n    }\n  };\n\n  const handleIceCandidate = async (message) => {\n    const { userId: remoteUserId, data: candidate } = message;\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    \n    if (peerConnection) {\n      try {\n        await peerConnection.addIceCandidate(candidate);\n      } catch (error) {\n        console.error('添加ICE候选者失败:', error);\n      }\n    }\n  };\n\n  const sendMessage = (message) => {\n    if (websocketRef.current && websocketRef.current.readyState === WebSocket.OPEN) {\n      websocketRef.current.send(JSON.stringify(message));\n    }\n  };\n\n  const closePeerConnection = (remoteUserId) => {\n    const peerConnection = peerConnectionsRef.current.get(remoteUserId);\n    if (peerConnection) {\n      peerConnection.close();\n      peerConnectionsRef.current.delete(remoteUserId);\n    }\n    setRemoteStreams(prev => {\n      const newMap = new Map(prev);\n      newMap.delete(remoteUserId);\n      return newMap;\n    });\n  };\n\n  const toggleAudio = () => {\n    if (localStream) {\n      const audioTrack = localStream.getAudioTracks()[0];\n      if (audioTrack) {\n        audioTrack.enabled = !audioTrack.enabled;\n        setIsAudioEnabled(audioTrack.enabled);\n      }\n    }\n  };\n\n  const toggleVideo = () => {\n    if (localStream) {\n      const videoTrack = localStream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.enabled = !videoTrack.enabled;\n        setIsVideoEnabled(videoTrack.enabled);\n      }\n    }\n  };\n\n  const leaveRoom = () => {\n    cleanup();\n    navigate('/');\n  };\n\n  const cleanup = () => {\n    if (localStream) {\n      localStream.getTracks().forEach(track => track.stop());\n    }\n    \n    peerConnectionsRef.current.forEach(pc => pc.close());\n    peerConnectionsRef.current.clear();\n    \n    if (websocketRef.current) {\n      websocketRef.current.close();\n    }\n  };\n\n  const copyRoomId = () => {\n    navigator.clipboard.writeText(roomId);\n    alert('房间ID已复制到剪贴板');\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1>会议室: {roomId}</h1>\n        <p>用户: {username} | 在线人数: {users.length + 1}</p>\n        <button className=\"btn\" onClick={copyRoomId} style={{ marginTop: '10px' }}>\n          复制房间ID\n        </button>\n      </div>\n\n      {error && <div className=\"error\">{error}</div>}\n\n      <div className=\"video-container\">\n        {/* 本地视频 */}\n        <div className=\"video-wrapper\">\n          <video\n            ref={localVideoRef}\n            className=\"video\"\n            autoPlay\n            muted\n            playsInline\n          />\n          <div className=\"video-overlay\">\n            {username} (我)\n          </div>\n        </div>\n\n        {/* 远程视频 */}\n        {Array.from(remoteStreams.entries()).map(([userId, stream]) => {\n          const user = users.find(u => u.id === userId);\n          return (\n            <div key={userId} className=\"video-wrapper\">\n              <video\n                className=\"video\"\n                autoPlay\n                playsInline\n                ref={(el) => {\n                  if (el && stream) {\n                    el.srcObject = stream;\n                  }\n                }}\n              />\n              <div className=\"video-overlay\">\n                {user?.username || 'Unknown User'}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      <div className=\"controls\">\n        <button\n          className={`btn ${isAudioEnabled ? 'btn-success' : 'btn-danger'}`}\n          onClick={toggleAudio}\n        >\n          {isAudioEnabled ? '🎤 麦克风开启' : '🎤 麦克风关闭'}\n        </button>\n        \n        <button\n          className={`btn ${isVideoEnabled ? 'btn-success' : 'btn-danger'}`}\n          onClick={toggleVideo}\n        >\n          {isVideoEnabled ? '📹 摄像头开启' : '📹 摄像头关闭'}\n        </button>\n        \n        <button className=\"btn btn-danger\" onClick={leaveRoom}>\n          离开会议\n        </button>\n      </div>\n\n      <div className=\"user-list\">\n        <h3>参会人员 ({users.length + 1})</h3>\n        <div className=\"user-item\">\n          <div className=\"status-indicator\"></div>\n          {username} (我)\n        </div>\n        {users.map(user => (\n          <div key={user.id} className=\"user-item\">\n            <div className=\"status-indicator\"></div>\n            {user.username}\n          </div>\n        ))}\n      </div>\n\n      <div style={{ textAlign: 'center', marginTop: '20px', color: isConnected ? '#51cf66' : '#ff6b6b' }}>\n        {isConnected ? '🟢 已连接到服务器' : '🔴 服务器连接断开'}\n      </div>\n    </div>\n  );\n}\n\nexport default MeetingRoom; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}